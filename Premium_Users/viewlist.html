<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Search Hub</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;700;800&display=swap" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<script>
  tailwind.config = {
    darkMode: "class",
    theme: {
      extend: {
        colors: {
          primary: "#1173d4",
          "background-light": "#f6f7f8",
          "background-dark": "#101922",
          gold: "#FFD700",
        },
        fontFamily: {
          display: ["Plus Jakarta Sans"],
        },
      },
    },
  };
</script>
</head>

<body class="bg-background-light dark:bg-background-dark font-display">
  <div class="flex h-screen flex-col">

    <!-- Header -->
    <header class="sticky top-0 z-10 border-b border-zinc-200 dark:border-zinc-800 bg-background-light dark:bg-background-dark">
      <div class="flex items-center justify-between p-4">
        <button class="flex h-10 w-10 items-center justify-center rounded-full text-zinc-700 dark:text-zinc-300" onclick="history.back()">
          <span class="material-symbols-outlined">arrow_back</span>
        </button>
        <h1 class="text-xl font-bold text-zinc-900 dark:text-white">Search Hub</h1>
        <span class="material-symbols-outlined text-gold">workspace_premium</span>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-4 pb-24">
      <h2 class="text-lg font-bold text-zinc-900 dark:text-white mb-1">Search List</h2>
      <p class="text-sm text-zinc-500 dark:text-zinc-400 mb-4">Manage your saved search keywords</p>

      <!-- Search list -->
      <ul id="searchListContainer" class="space-y-3"></ul>
    </main>

    <!-- Footer -->
    <footer class="fixed bottom-0 left-0 right-0 border-t border-background-light/10 dark:border-background-dark/10 bg-background-light/80 dark:bg-background-dark/80 backdrop-blur-sm">
      <nav class="flex items-center justify-around px-4 pb-3 pt-2">
        <a class="flex flex-col items-center gap-1 text-gold" href="#">
          <svg fill="currentColor" height="24" viewBox="0 0 256 256" width="24" xmlns="http://www.w3.org/2000/svg">
            <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
          </svg>
          <span class="text-xs font-medium">Search</span>
        </a>
      </nav>
    </footer>
  </div>

  <!-- âœ… JS for keyword list -->
  <script>
    const searchListContainer = document.getElementById('searchListContainer');

    const defaultKeywords = [
      "mid-century modern chair",
      "vintage bicycle",
      "leather sofa",
      "antique lamp",
      "wooden desk",
      "ceramic vase"
    ];

    // Load from localStorage or fallback to defaults
    let searchList = JSON.parse(localStorage.getItem("searchList")) || [...defaultKeywords];

    function saveList() {
      localStorage.setItem("searchList", JSON.stringify(searchList));
    }

function renderSearchList() {
  searchListContainer.innerHTML = '';
  if (searchList.length === 0) {
    searchListContainer.innerHTML = '<li class="text-slate-500 dark:text-slate-400 text-center">No saved keywords.</li>';
    return;
  }

  searchList.forEach(keyword => {
    const li = document.createElement('li');
    li.className = 'flex justify-between items-center bg-zinc-100 dark:bg-zinc-800 rounded-lg p-3';

    li.innerHTML = `
      <span class="font-medium text-zinc-800 dark:text-zinc-200 cursor-pointer">"${keyword}"</span>
      <button class="text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200">
        <span class="material-symbols-outlined text-base">close</span>
      </button>
    `;

    // ðŸ”¹ Click keyword to search
    li.querySelector('span').addEventListener('click', () => {
      searchFromKeyword(keyword);
      window.scrollTo({ top: 0, behavior: 'smooth' }); // optional: scroll to top
    });

    // ðŸ”¹ Remove keyword
    li.querySelector('button').addEventListener('click', () => {
      searchList = searchList.filter(k => k !== keyword);
      saveList();
      renderSearchList();
    });

    searchListContainer.appendChild(li);
  });
}


    renderSearchList();



  function searchFromKeyword(keyword) {
  const query = keyword.toLowerCase().trim();
  if (!query) return;

  const underMatch = query.match(/under\s*(\d+)/i);
  const priceLimit = underMatch ? parseFloat(underMatch[1]) : null;
  const keywordText = underMatch ? query.replace(/under\s*\d+/i, "").trim() : query;

  const items = document.querySelectorAll("main a.group");

  items.forEach(item => {
    const title = item.querySelector("p.font-medium")?.textContent.toLowerCase() || "";
    const location = item.querySelector("p.text-xs")?.textContent.toLowerCase() || "";
    const priceText = item.querySelector("p.font-bold, p.font-semibold")?.textContent.replace(/[^\d.]/g, "") || '';
    const price = parseFloat(priceText) || 0;

    let matchesKeyword = !keywordText || title.includes(keywordText) || location.includes(keywordText);
    let matchesPrice = priceLimit === null || price <= priceLimit;

    item.style.display = (matchesKeyword && matchesPrice) ? "" : "none";
  });

    // Save the clicked keyword temporarily
  localStorage.setItem("activeSearchKeyword", keyword);
  // Redirect to home (change to your actual homepage filename)
  window.location.href = "../Premium_Users/productscreen.html";
}

  </script>

  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</body>
</html>
